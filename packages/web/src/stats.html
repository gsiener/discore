<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Advanced Stats - Discore</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="stylesheet" href="./style.css" />
    <link rel="stylesheet" href="./stats-style.css" />
  </head>
  <body>
    <div id="app">
      <nav class="nav">
        <h1>Discore</h1>
        <div class="nav-links">
          <a href="/index.html" class="nav-link">Live Games</a>
          <a href="/games.html" class="nav-link">All Games</a>
        </div>
      </nav>

      <main id="main-content">
        <div id="stats-filters" class="stats-filters">
          <div class="filter-group">
            <label for="tournament-filter">Tournament:</label>
            <select id="tournament-filter">
              <option value="">All Tournaments</option>
            </select>
          </div>
          <div class="filter-group">
            <label for="game-filter">Game:</label>
            <select id="game-filter">
              <option value="">All Games (Aggregated)</option>
            </select>
          </div>
        </div>

        <div id="loading-view" class="loading-view">
          <p>Loading stats...</p>
        </div>

        <div id="stats-view" class="hidden">
          <section class="stats-section">
            <h2>Player Statistics</h2>
            <div id="player-stats-container">
              <table id="player-stats-table" class="stats-table">
                <thead>
                  <tr>
                    <th>Player</th>
                    <th>Goals</th>
                    <th>Assists</th>
                    <th>Blocks</th>
                    <th>Steals</th>
                    <th>Points Played</th>
                    <th>+/-</th>
                    <th class="mobile-hidden">G/Game</th>
                    <th class="mobile-hidden">A/Game</th>
                  </tr>
                </thead>
                <tbody>
                </tbody>
              </table>
            </div>
          </section>

          <section id="team-trends-section" class="stats-section hidden">
            <h2>Team Trends</h2>

            <div class="stats-grid">
              <div class="stat-card">
                <h3>Overall Record</h3>
                <div class="stat-rows">
                  <div class="stat-row">
                    <span class="stat-label">Record:</span>
                    <span id="record-wins-losses" class="stat-value">0-0</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Win %:</span>
                    <span id="record-win-pct" class="stat-value">0.0%</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Avg Scored:</span>
                    <span id="record-avg-scored" class="stat-value">0.0</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Avg Allowed:</span>
                    <span id="record-avg-allowed" class="stat-value">0.0</span>
                  </div>
                </div>
              </div>

              <div class="stat-card">
                <h3>Streaks</h3>
                <div class="stat-rows">
                  <div class="stat-row">
                    <span class="stat-label">Current Streak:</span>
                    <span id="streak-current" class="stat-value">0</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Longest Win Streak:</span>
                    <span id="streak-longest-win" class="stat-value">0</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Longest Loss Streak:</span>
                    <span id="streak-longest-loss" class="stat-value">0</span>
                  </div>
                </div>
              </div>

              <div class="stat-card">
                <h3>Scoring Patterns</h3>
                <div class="stat-rows">
                  <div class="stat-row">
                    <span class="stat-label">Longest Run:</span>
                    <span id="pattern-longest-run" class="stat-value">0</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Longest Drought:</span>
                    <span id="pattern-longest-drought" class="stat-value">0</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Close Wins:</span>
                    <span id="pattern-close-wins" class="stat-value">0</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Blowout Wins:</span>
                    <span id="pattern-blowout-wins" class="stat-value">0</span>
                  </div>
                </div>
              </div>
            </div>

            <div id="opponent-records-container" class="subsection">
              <h3>Head-to-Head Records</h3>
              <table id="opponent-records-table" class="stats-table">
                <thead>
                  <tr>
                    <th>Opponent</th>
                    <th>W-L</th>
                    <th>Avg Scored</th>
                    <th>Avg Allowed</th>
                    <th class="mobile-hidden">Last Result</th>
                  </tr>
                </thead>
                <tbody>
                </tbody>
              </table>
            </div>

            <div id="recent-form-container" class="subsection">
              <h3>Recent Form (Last 10 Games)</h3>
              <div id="recent-form-list" class="recent-form-list">
              </div>
            </div>
          </section>

          <section id="player-chemistry-section" class="stats-section hidden">
            <h2>Player Chemistry</h2>
            <p class="section-description">Top player combinations based on assists to each other</p>
            <table id="player-chemistry-table" class="stats-table">
              <thead>
                <tr>
                  <th>Player 1</th>
                  <th>Player 2</th>
                  <th>Games Together</th>
                  <th>Goals Combined</th>
                  <th>Assists Together</th>
                </tr>
              </thead>
              <tbody>
              </tbody>
            </table>
          </section>

          <section id="game-context-section" class="stats-section hidden">
            <h2>Game Context Stats</h2>

            <div class="stats-grid">
              <div class="stat-card">
                <h3>Momentum</h3>
                <div class="stat-rows">
                  <div class="stat-row">
                    <span class="stat-label">Largest Lead:</span>
                    <span id="momentum-largest-lead" class="stat-value">0</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Largest Deficit:</span>
                    <span id="momentum-largest-deficit" class="stat-value">0</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Lead Changes:</span>
                    <span id="momentum-lead-changes" class="stat-value">0</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Max Comeback From:</span>
                    <span id="momentum-max-comeback" class="stat-value">0</span>
                  </div>
                </div>
              </div>

              <div class="stat-card">
                <h3>Half Performance</h3>
                <div class="stat-rows">
                  <div class="stat-row">
                    <span class="stat-label">1st Half Score:</span>
                    <span id="half-first-score" class="stat-value">0-0</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">1st Half Diff:</span>
                    <span id="half-first-diff" class="stat-value">0</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">2nd Half Score:</span>
                    <span id="half-second-score" class="stat-value">0-0</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">2nd Half Diff:</span>
                    <span id="half-second-diff" class="stat-value">0</span>
                  </div>
                </div>
              </div>

              <div class="stat-card">
                <h3>Timeout Efficiency</h3>
                <div class="stat-rows">
                  <div class="stat-row">
                    <span class="stat-label">Total Timeouts:</span>
                    <span id="timeout-total" class="stat-value">0</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Conversion Rate:</span>
                    <span id="timeout-conversion" class="stat-value">0%</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Scored After:</span>
                    <span id="timeout-scored-after" class="stat-value">0</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Allowed After:</span>
                    <span id="timeout-allowed-after" class="stat-value">0</span>
                  </div>
                </div>
              </div>

              <div class="stat-card">
                <h3>Close Game Performance</h3>
                <div class="stat-rows">
                  <div class="stat-row">
                    <span class="stat-label">Points Within 2:</span>
                    <span id="close-points-played" class="stat-value">0</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">Score Differential:</span>
                    <span id="close-score-diff" class="stat-value">0</span>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>

        <div id="error-view" class="hidden error-message">
          <p id="error-text"></p>
        </div>
      </main>

      <footer>
        <p>Advanced statistics powered by Discore</p>
      </footer>
    </div>

    <script type="module" src="./stats.ts"></script>
  </body>
</html>
