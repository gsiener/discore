# Cloudflare Workers configuration for Scorebot

name = "scorebot-api"
main = "dist/index.js"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]
workers_dev = true

# Custom domain routes
[[routes]]
pattern = "api.score.kcuda.org/*"
zone_name = "kcuda.org"

# Durable Objects for game state management
[[durable_objects.bindings]]
name = "GAME_STATE"
class_name = "GameState"
script_name = "scorebot-api"

[[migrations]]
tag = "v1"
new_classes = ["GameState"]

# D1 Database for persistent storage
[[d1_databases]]
binding = "DB"
database_name = "scorebot"
database_id = "bace02d0-5f6c-49d9-99c0-4a28d7b9a83b"

# KV namespace for caching (optional)
# [[kv_namespaces]]
# binding = "CACHE"
# id = "placeholder"

# Environment variables (use .dev.vars for local development)
[vars]
ENVIRONMENT = "production"
